# Nginx Configuration for TECHSHEQ Website
# Clean URL routing and redirects

server {
    listen 80;
    server_name www.techsheq.com techsheq.com;
    
    # Security headers
    add_header X-Content-Type-Options nosniff;
    add_header X-Frame-Options DENY;
    add_header X-XSS-Protection "1; mode=block";
    
    # Redirect old URLs to clean URLs
    location = /pages/homepage_b2b_service_provider_platform.html {
        return 301 /;
    }
    
    location = /pages/services_overview_two_pillar_architecture.html {
        return 301 /services;
    }
    
    location = /pages/industries_sector_specific_solutions.html {
        return 301 /industries;
    }
    
    location = /pages/about_sri_lankan_business_advantage.html {
        return 301 /about;
    }
    
    location = /pages/contact_discovery_call_booking.html {
        return 301 /contact;
    }
    
    location = /pages/managed_it_services_flagship_service_detail.html {
        return 301 /managed-it-services;
    }
    
    # Serve actual files for clean URLs
    location = / {
        try_files $uri /pages/homepage_b2b_service_provider_platform.html;
    }
    
    location = /services {
        try_files $uri /pages/services_overview_two_pillar_architecture.html;
    }
    
    location = /industries {
        try_files $uri /pages/industries_sector_specific_solutions.html;
    }
    
    location = /about {
        try_files $uri /pages/about_sri_lankan_business_advantage.html;
    }
    
    location = /contact {
        try_files $uri /pages/contact_discovery_call_booking.html;
    }
    
    location = /managed-it-services {
        try_files $uri /pages/managed_it_services_flagship_service_detail.html;
    }
    
    # Handle trailing slashes
    location ~ ^(.+)/$ {
        return 301 $1;
    }
    
    # Cache static assets
    location ~* \.(css|js|png|jpg|jpeg|gif|svg|woff|woff2|ttf|eot)$ {
        expires 1y;
        add_header Cache-Control "public, immutable";
    }
    
    # Compress files
    gzip on;
    gzip_vary on;
    gzip_min_length 1024;
    gzip_types text/plain text/css text/xml text/javascript application/javascript application/xml+rss application/json;
}
